{"id":"a3e1ab05-30ea-4e4e-845e-58a6f5d34b1e","revision":0,"last_node_id":28,"last_link_id":73,"nodes":[{"id":26,"type":"VHS_LoadVideo","pos":[-372.0133361816406,-91.5406494140625],"size":[253.279296875,738.6077270507812],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"video","name":"video","type":"COMBO","widget":{"name":"video"},"link":null},{"localized_name":"force_rate","name":"force_rate","type":"FLOAT","widget":{"name":"force_rate"},"link":null},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"frame_load_cap","name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"},"link":null},{"localized_name":"skip_first_frames","name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"},"link":null},{"localized_name":"select_every_nth","name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"},"link":null},{"localized_name":"format","name":"format","shape":7,"type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[68]},{"localized_name":"frame_count","name":"frame_count","type":"INT","links":null},{"localized_name":"audio","name":"audio","type":"AUDIO","links":null},{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":[58]}],"properties":{"Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"11月19日.mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":960,"skip_first_frames":0,"select_every_nth":1,"format":"AnimateDiff","choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"filename":"11月19日.mp4","type":"input","format":"video/mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":960,"skip_first_frames":0,"select_every_nth":1}}}},{"id":28,"type":"StringDisplayNode","pos":[-804.7056884765625,206.5503387451172],"size":[414.2898864746094,348.5684509277344],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":67}],"outputs":[{"localized_name":"text","name":"text","type":"STRING","links":[]}],"properties":{"Node name for S&R":"StringDisplayNode"},"widgets_values":[""]},{"id":5,"type":"DiffRhythmRun","pos":[-77.08522033691406,-542.7380981445312],"size":[272.9696044921875,378],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"lyrics_or_edit_lyrics","name":"lyrics_or_edit_lyrics","shape":7,"type":"STRING","link":54},{"localized_name":"style_audio_or_edit_song","name":"style_audio_or_edit_song","shape":7,"type":"AUDIO","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"style_prompt","name":"style_prompt","type":"STRING","widget":{"name":"style_prompt"},"link":55},{"localized_name":"unload_model","name":"unload_model","shape":7,"type":"BOOLEAN","widget":{"name":"unload_model"},"link":null},{"localized_name":"odeint_method","name":"odeint_method","shape":7,"type":"COMBO","widget":{"name":"odeint_method"},"link":null},{"localized_name":"steps","name":"steps","shape":7,"type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","shape":7,"type":"INT","widget":{"name":"cfg"},"link":null},{"localized_name":"quality_or_speed","name":"quality_or_speed","shape":7,"type":"COMBO","widget":{"name":"quality_or_speed"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"edit","name":"edit","shape":7,"type":"BOOLEAN","widget":{"name":"edit"},"link":null},{"localized_name":"edit_segments","name":"edit_segments","shape":7,"type":"STRING","widget":{"name":"edit_segments"},"link":null}],"outputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","links":[46,72,73]}],"properties":{"Node name for S&R":"DiffRhythmRun"},"widgets_values":["cfm_model_v1_2.pt","",false,"euler",33,4,"quality",329776126,"fixed",false,"[-1, 42], [67, -1]"]},{"id":27,"type":"VHS_VideoInfoSource","pos":[-75.24994659423828,180.48106384277344],"size":[245.4794921875,106],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","link":58}],"outputs":[{"localized_name":"fps🟨","name":"fps🟨","type":"FLOAT","links":[59,60,61,62]},{"localized_name":"frame_count🟨","name":"frame_count🟨","type":"INT","links":null},{"localized_name":"duration🟨","name":"duration🟨","type":"FLOAT","links":null},{"localized_name":"width🟨","name":"width🟨","type":"INT","links":[63,65]},{"localized_name":"height🟨","name":"height🟨","type":"INT","links":[64,66]}],"properties":{"Node name for S&R":"VHS_VideoInfoSource"},"widgets_values":{}},{"id":13,"type":"AddSubtitlesToVideo","pos":[-93.97632598876953,333.4096984863281],"size":[304.091796875,338],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":68},{"localized_name":"json_text","name":"json_text","shape":7,"type":"STRING","link":null},{"localized_name":"subtitle_text","name":"subtitle_text","shape":7,"type":"STRING","link":53},{"localized_name":"language","name":"language","type":"COMBO","widget":{"name":"language"},"link":null},{"localized_name":"max_words_per_line","name":"max_words_per_line","type":"INT","widget":{"name":"max_words_per_line"},"link":null},{"localized_name":"font_path","name":"font_path","type":"STRING","widget":{"name":"font_path"},"link":null},{"localized_name":"font_size","name":"font_size","type":"INT","widget":{"name":"font_size"},"link":null},{"localized_name":"font_color","name":"font_color","type":"STRING","widget":{"name":"font_color"},"link":null},{"localized_name":"subtitle_background_color","name":"subtitle_background_color","type":"STRING","widget":{"name":"subtitle_background_color"},"link":null},{"localized_name":"y_offset","name":"y_offset","type":"INT","widget":{"name":"y_offset"},"link":null},{"localized_name":"x_offset","name":"x_offset","type":"INT","widget":{"name":"x_offset"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":63},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":64},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":60}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[29,70]}],"properties":{"Node name for S&R":"AddSubtitlesToVideo"},"widgets_values":["类中文字符",16,"D:\\AIGC\\APP\\ComfyUI_Data\\custom_nodes\\ComfyUI_AudioTools\\ChironGoRoundTC-600SB.ttf",20,"black","#B8860B",-150,0,996,1024,18]},{"id":11,"type":"VHS_VideoCombine","pos":[609.1402587890625,-560.9979858398438],"size":[557.5238647460938,1282.584228515625],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":31},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":72},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":61},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":18,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h265-mp4","pix_fmt":"yuv420p10le","crf":22,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00015-audio.mp4","subfolder":"","type":"output","format":"video/h265-mp4","frame_rate":24,"workflow":"AnimateDiff_00015.png","fullpath":"D:\\AIGC\\APP\\ComfyUI_Data\\output\\AnimateDiff_00015-audio.mp4"}}}},{"id":24,"type":"StringPauseGateNode","pos":[-76.28720092773438,-115.89959716796875],"size":[261.52618408203125,239],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":51},{"localized_name":"split_tag","name":"split_tag","shape":7,"type":"STRING","widget":{"name":"split_tag"},"link":null},{"localized_name":"paste_edit_text","name":"paste_edit_text","shape":7,"type":"STRING","widget":{"name":"paste_edit_text"},"link":null},{"localized_name":"merge_text","name":"merge_text","shape":7,"type":"BOOLEAN","widget":{"name":"merge_text"},"link":null},{"localized_name":"enable_pause_gate","name":"enable_pause_gate","shape":7,"type":"BOOLEAN","widget":{"name":"enable_pause_gate"},"link":null}],"outputs":[{"localized_name":"text_or_split_1","name":"text_or_split_1","type":"STRING","links":[52,53,54]},{"localized_name":"split_2","name":"split_2","type":"STRING","links":[55]},{"localized_name":"edited_text","name":"edited_text","type":"STRING","links":null}],"properties":{"Node name for S&R":"StringPauseGateNode"},"widgets_values":["false","true","","",""]},{"id":14,"type":"VHS_VideoCombine","pos":[273.1006164550781,15.792316436767578],"size":[277.7787170410156,310],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":29},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":73},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":62},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":18,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h265-mp4","pix_fmt":"yuv420p10le","crf":22,"save_metadata":true,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00002-audio.mp4","subfolder":"","type":"temp","format":"video/h265-mp4","frame_rate":24,"workflow":"AnimateDiff_00002.png","fullpath":"D:\\AIGC\\APP\\ComfyUI_Data\\temp\\AnimateDiff_00002-audio.mp4"}}}},{"id":12,"type":"AddSubtitlesToVideo","pos":[266.23431396484375,-408.7778625488281],"size":[304.091796875,338],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":70},{"localized_name":"json_text","name":"json_text","shape":7,"type":"STRING","link":null},{"localized_name":"subtitle_text","name":"subtitle_text","shape":7,"type":"STRING","link":69},{"localized_name":"language","name":"language","type":"COMBO","widget":{"name":"language"},"link":null},{"localized_name":"max_words_per_line","name":"max_words_per_line","type":"INT","widget":{"name":"max_words_per_line"},"link":null},{"localized_name":"font_path","name":"font_path","type":"STRING","widget":{"name":"font_path"},"link":null},{"localized_name":"font_size","name":"font_size","type":"INT","widget":{"name":"font_size"},"link":null},{"localized_name":"font_color","name":"font_color","type":"STRING","widget":{"name":"font_color"},"link":null},{"localized_name":"subtitle_background_color","name":"subtitle_background_color","type":"STRING","widget":{"name":"subtitle_background_color"},"link":null},{"localized_name":"y_offset","name":"y_offset","type":"INT","widget":{"name":"y_offset"},"link":null},{"localized_name":"x_offset","name":"x_offset","type":"INT","widget":{"name":"x_offset"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":65},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":66},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":59}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[31]}],"properties":{"Node name for S&R":"AddSubtitlesToVideo"},"widgets_values":["English_word",5,"D:\\AIGC\\APP\\ComfyUI_Data\\custom_nodes\\ComfyUI_AudioTools\\ChironGoRoundTC-600SB.ttf",20,"black","#B8860B",-200,0,1024,1024,18]},{"id":20,"type":"PreviewAudio","pos":[253.1895751953125,-563.0321655273438],"size":[318.164794921875,88],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","link":46},{"localized_name":"audioUI","name":"audioUI","type":"AUDIO_UI","widget":{"name":"audioUI"},"link":null}],"outputs":[],"properties":{"Node name for S&R":"PreviewAudio"},"widgets_values":[]},{"id":23,"type":"StringDisplayNode","pos":[-386.34814453125,-499.712646484375],"size":[271.30059814453125,330.50701904296875],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":50}],"outputs":[{"localized_name":"text","name":"text","type":"STRING","links":[51]}],"properties":{"Node name for S&R":"StringDisplayNode"},"widgets_values":[""]},{"id":3,"type":"DeepSeekV3","pos":[-799.3056030273438,-504.2520751953125],"size":[385.86309814453125,317.9023132324219],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"api_key","name":"api_key","type":"STRING","widget":{"name":"api_key"},"link":null},{"localized_name":"system_prompt","name":"system_prompt","type":"STRING","widget":{"name":"system_prompt"},"link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"text","name":"text","type":"STRING","links":[50]}],"properties":{"Node name for S&R":"DeepSeekV3"},"widgets_values":["","你是卓越的歌词作者. 用户给你一个主题, 和风格要求, 围绕主题严格按照要求写一篇歌词.","# 给你的主题是 \"我是如此的幸福\", 风格是 \"温暖,舒缓,启迪,博爱民谣吉他摇滚\", 帮我写一篇歌词. 严格遵循以下要求：\n\n### **强制格式规则**\n 1. **仅输出时间戳和歌词**，禁止任何括号、旁白、段落标记（如副歌、间奏、尾奏等注释）。\n 2. 每行格式必须为 `[mm:ss.xx]歌词内容`，时间戳与歌词间无空格，歌词内容需完整连贯, 每行必须有时间戳和歌词, 不能有空行。\n 3. 时间戳需自然分布，**第一句歌词起始时间不得为 [00:00.00]**，需考虑前奏空白。\n\n### **内容与结构要求**\n 1. 歌词应富有变化，使情绪递进，整体连贯有层次感。**每行歌词长度应自然变化**，切勿长度一致，导致很格式化。\n 2. **时间戳分配应根据歌曲的标签、歌词的情感、节奏来合理推测**，而非机械地按照歌词长度分配。\n 3. 间奏/尾奏仅通过时间空白体现（如从 [02:30.00] 直接跳至 [02:50.00]），**无需文字描述**。\n\n### **负面示例（禁止出现）**\n - 错误：[01:30.00](钢琴间奏)\n - 错误：[02:00.00][副歌]\n - 错误：空行、换行符、注释\n\n# 再用不超过 50 个单词的 tags: \"英文短语或单词\" 简要描述这首歌的风格, 乐器伴凑, 男或女声音等, 重点突出, \n\n示例 tags:\n\nelectronic, rock, pop, funk, soul, cyberpunk, Acid jazz, electro, electronic music, soft electric drums, melodic, background music for parties, radio broadcasts, workout playlists, saxophone, jazz, piano, violin, female voice, male voice, clean vocals, 110 bpm, fast tempo, slow tempo, loops, fills, acoustic guitar, electric bass, Indie folk ballad, coming-of-age themes, acoustic guitar picking with harmonica interludes\n\n# 只输出 歌词 和 tags, tags 之前必须有标签 \"tags:\" 隔开","DeepSeek-V3",800440680788896,"randomize"]},{"id":7,"type":"DeepSeekV3","pos":[-790.9855346679688,-112.36160278320312],"size":[375.3270568847656,238],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"api_key","name":"api_key","type":"STRING","widget":{"name":"api_key"},"link":null},{"localized_name":"system_prompt","name":"system_prompt","type":"STRING","widget":{"name":"system_prompt"},"link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":52},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"text","name":"text","type":"STRING","links":[67,69]}],"properties":{"Node name for S&R":"DeepSeekV3"},"widgets_values":["","你是卓越的翻译助手, 严格保持格式不变, 只将中文翻译成英文, 只输出翻译及保持格式.","","DeepSeek-V3",958685648153357,"fixed"]}],"links":[[29,13,0,14,0,"IMAGE"],[31,12,0,11,0,"IMAGE"],[46,5,0,20,0,"AUDIO"],[50,3,0,23,0,"STRING"],[51,23,0,24,0,"STRING"],[52,24,0,7,2,"STRING"],[53,24,0,13,2,"STRING"],[54,24,0,5,0,"STRING"],[55,24,1,5,3,"STRING"],[58,26,3,27,0,"VHS_VIDEOINFO"],[59,27,0,12,13,"FLOAT"],[60,27,0,13,13,"FLOAT"],[61,27,0,11,4,"FLOAT"],[62,27,0,14,4,"FLOAT"],[63,27,3,13,11,"INT"],[64,27,4,13,12,"INT"],[65,27,3,12,11,"INT"],[66,27,4,12,12,"INT"],[67,7,0,28,0,"STRING"],[68,26,0,13,0,"IMAGE"],[69,7,0,12,2,"STRING"],[70,13,0,12,0,"IMAGE"],[72,5,0,11,1,"AUDIO"],[73,5,0,14,1,"AUDIO"]],"groups":[],"config":{},"extra":{"frontendVersion":"1.18.9","VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}