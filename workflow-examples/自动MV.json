{"id":"a3e1ab05-30ea-4e4e-845e-58a6f5d34b1e","revision":0,"last_node_id":32,"last_link_id":91,"nodes":[{"id":11,"type":"VHS_VideoCombine","pos":[343.69403076171875,-550.5],"size":[445.34649658203125,1082.5345458984375],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":84},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":87},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":61},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":18,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h265-mp4","pix_fmt":"yuv420p10le","crf":22,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00047-audio.mp4","subfolder":"","type":"output","format":"video/h265-mp4","frame_rate":24,"workflow":"AnimateDiff_00047.png","fullpath":"D:\\AIGC\\APP\\ComfyUI_Data\\output\\AnimateDiff_00047-audio.mp4"}}}},{"id":13,"type":"AddSubtitlesToVideo","pos":[-35.488033294677734,48.8764533996582],"size":[304.091796875,362],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":68},{"localized_name":"json_text","name":"json_text","shape":7,"type":"STRING","link":null},{"localized_name":"subtitle_text","name":"subtitle_text","shape":7,"type":"STRING","link":81},{"localized_name":"language","name":"language","type":"COMBO","widget":{"name":"language"},"link":null},{"localized_name":"max_words_per_line","name":"max_words_per_line","type":"INT","widget":{"name":"max_words_per_line"},"link":null},{"localized_name":"font_path","name":"font_path","type":"STRING","widget":{"name":"font_path"},"link":null},{"localized_name":"font_size","name":"font_size","type":"INT","widget":{"name":"font_size"},"link":null},{"localized_name":"font_color","name":"font_color","type":"STRING","widget":{"name":"font_color"},"link":null},{"localized_name":"subtitle_background_color","name":"subtitle_background_color","type":"STRING","widget":{"name":"subtitle_background_color"},"link":null},{"localized_name":"y_offset","name":"y_offset","type":"INT","widget":{"name":"y_offset"},"link":null},{"localized_name":"x_offset","name":"x_offset","type":"INT","widget":{"name":"x_offset"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":63},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":64},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":60},{"localized_name":"max_duration_of_segment","name":"max_duration_of_segment","shape":7,"type":"FLOAT","widget":{"name":"max_duration_of_segment"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[84]}],"properties":{"Node name for S&R":"AddSubtitlesToVideo"},"widgets_values":["类中文字符",16,"D:\\AIGC\\APP\\ComfyUI_Data\\custom_nodes\\ComfyUI_AudioTools\\ChironGoRoundTC-600SB.ttf",20,"black","#B8860B",-150,0,996,1024,18,11.8]},{"id":32,"type":"StringEditNode","pos":[-411.7539367675781,-541.7638549804688],"size":[296.3845520019531,192],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":89},{"localized_name":"paste_edit_text","name":"paste_edit_text","shape":7,"type":"STRING","widget":{"name":"paste_edit_text"},"link":null},{"localized_name":"split_tag","name":"split_tag","shape":7,"type":"STRING","widget":{"name":"split_tag"},"link":null}],"outputs":[{"localized_name":"text","name":"text","type":"STRING","links":null},{"localized_name":"split_1","name":"split_1","type":"STRING","links":[90]},{"localized_name":"split_2","name":"split_2","type":"STRING","links":[91]},{"localized_name":"edited_text","name":"edited_text","type":"STRING","links":null},{"localized_name":"merged_text","name":"merged_text","type":"STRING","links":null}],"properties":{"Node name for S&R":"StringEditNode"},"widgets_values":["","tags:"]},{"id":27,"type":"VHS_VideoInfoSource","pos":[-371.5087890625,-262.47503662109375],"size":[245.4794921875,106],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","link":58}],"outputs":[{"localized_name":"fps🟨","name":"fps🟨","type":"FLOAT","links":[60,61]},{"localized_name":"frame_count🟨","name":"frame_count🟨","type":"INT","links":null},{"localized_name":"duration🟨","name":"duration🟨","type":"FLOAT","links":null},{"localized_name":"width🟨","name":"width🟨","type":"INT","links":[63]},{"localized_name":"height🟨","name":"height🟨","type":"INT","links":[64]}],"properties":{"Node name for S&R":"VHS_VideoInfoSource"},"widgets_values":{}},{"id":3,"type":"DeepSeekV3","pos":[-844.56884765625,-547.3346557617188],"size":[385.86309814453125,317.9023132324219],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"api_key","name":"api_key","type":"STRING","widget":{"name":"api_key"},"link":null},{"localized_name":"system_prompt","name":"system_prompt","type":"STRING","widget":{"name":"system_prompt"},"link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"text","name":"text","type":"STRING","links":[81,88,89]}],"properties":{"Node name for S&R":"DeepSeekV3"},"widgets_values":["","你是卓越的歌词作者. 用户给你一个主题, 和风格要求, 围绕主题严格按照要求写一篇歌词.","# 给你的主题是 \"我是如此的幸福\", 风格是 \"温暖,舒缓,启迪,博爱民谣吉他摇滚\", 帮我写一篇歌词. 严格遵循以下要求：\n\n### **强制格式规则**\n 1. **仅输出时间戳和歌词**，禁止任何括号、旁白、段落标记（如副歌、间奏、尾奏等注释）。\n 2. 每行格式必须为 `[mm:ss.xx]歌词内容`，时间戳与歌词间无空格，歌词内容需完整连贯, 每行必须有时间戳和歌词, 不能有空行。\n 3. 时间戳需自然分布，**第一句歌词起始时间不得为 [00:00.00]**，需考虑前奏空白。\n\n### **内容与结构要求**\n 1. 歌词应富有变化，使情绪递进，整体连贯有层次感。**每行歌词长度应自然变化**，切勿长度一致，导致很格式化。\n 2. **时间戳分配应根据歌曲的标签、歌词的情感、节奏来合理推测**，而非机械地按照歌词长度分配。\n 3. 间奏/尾奏仅通过时间空白体现（如从 [02:30.00] 直接跳至 [02:50.00]），**无需文字描述**。\n\n### **负面示例（禁止出现）**\n - 错误：[01:30.00](钢琴间奏)\n - 错误：[02:00.00][副歌]\n - 错误：空行、换行符、注释\n\n# 再用不超过 50 个单词的 tags: \"英文短语或单词\" 简要描述这首歌的风格, 乐器伴凑, 男或女声音等, 重点突出, \n\n示例 tags:\n\nelectronic, rock, pop, funk, soul, cyberpunk, Acid jazz, electro, electronic music, soft electric drums, melodic, background music for parties, radio broadcasts, workout playlists, saxophone, jazz, piano, violin, female voice, male voice, clean vocals, 110 bpm, fast tempo, slow tempo, loops, fills, acoustic guitar, electric bass, Indie folk ballad, coming-of-age themes, acoustic guitar picking with harmonica interludes\n\n# 只输出 歌词 和 tags, tags 之前必须有标签 \"tags:\" 隔开","DeepSeek-V3",103474534972570,"fixed"]},{"id":31,"type":"PreviewAny","pos":[-838.212890625,-147.20701599121094],"size":[369.4537353515625,555.903076171875],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":88}],"outputs":[],"properties":{"Node name for S&R":"PreviewAny"},"widgets_values":[]},{"id":26,"type":"VHS_LoadVideo","pos":[-371.60455322265625,-74.77115631103516],"size":[253.279296875,738.6077270507812],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"video","name":"video","type":"COMBO","widget":{"name":"video"},"link":null},{"localized_name":"force_rate","name":"force_rate","type":"FLOAT","widget":{"name":"force_rate"},"link":null},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"frame_load_cap","name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"},"link":null},{"localized_name":"skip_first_frames","name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"},"link":null},{"localized_name":"select_every_nth","name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"},"link":null},{"localized_name":"format","name":"format","shape":7,"type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[68]},{"localized_name":"frame_count","name":"frame_count","type":"INT","links":null},{"localized_name":"audio","name":"audio","type":"AUDIO","links":null},{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":[58]}],"properties":{"Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"11月19日.mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":960,"skip_first_frames":0,"select_every_nth":1,"format":"AnimateDiff","choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"filename":"11月19日.mp4","type":"input","format":"video/mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":960,"skip_first_frames":0,"select_every_nth":1}}}},{"id":30,"type":"DiffRhythmRun","pos":[-39.72904968261719,-430.6697998046875],"size":[272.9696044921875,378],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"lyrics_or_edit_lyrics","name":"lyrics_or_edit_lyrics","shape":7,"type":"STRING","link":90},{"localized_name":"style_audio_or_edit_song","name":"style_audio_or_edit_song","shape":7,"type":"AUDIO","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"style_prompt","name":"style_prompt","type":"STRING","widget":{"name":"style_prompt"},"link":91},{"localized_name":"unload_model","name":"unload_model","shape":7,"type":"BOOLEAN","widget":{"name":"unload_model"},"link":null},{"localized_name":"odeint_method","name":"odeint_method","shape":7,"type":"COMBO","widget":{"name":"odeint_method"},"link":null},{"localized_name":"steps","name":"steps","shape":7,"type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","shape":7,"type":"INT","widget":{"name":"cfg"},"link":null},{"localized_name":"quality_or_speed","name":"quality_or_speed","shape":7,"type":"COMBO","widget":{"name":"quality_or_speed"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"edit","name":"edit","shape":7,"type":"BOOLEAN","widget":{"name":"edit"},"link":null},{"localized_name":"edit_segments","name":"edit_segments","shape":7,"type":"STRING","widget":{"name":"edit_segments"},"link":null}],"outputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","links":[86,87]}],"properties":{"Node name for S&R":"DiffRhythmRun"},"widgets_values":["cfm_model_v1_2.pt","Indie folk ballad, coming-of-age themes, acoustic guitar picking with harmonica interludes",true,"euler",30,4,"speed",207686223994422,"randomize",false,"[-1, 20], [60, -1]"]},{"id":20,"type":"PreviewAudio","pos":[-43.75056838989258,-584.0277709960938],"size":[318.164794921875,88],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","link":86},{"localized_name":"audioUI","name":"audioUI","type":"AUDIO_UI","widget":{"name":"audioUI"},"link":null}],"outputs":[],"properties":{"Node name for S&R":"PreviewAudio"},"widgets_values":[]}],"links":[[58,26,3,27,0,"VHS_VIDEOINFO"],[60,27,0,13,13,"FLOAT"],[61,27,0,11,4,"FLOAT"],[63,27,3,13,11,"INT"],[64,27,4,13,12,"INT"],[68,26,0,13,0,"IMAGE"],[81,3,0,13,2,"STRING"],[84,13,0,11,0,"IMAGE"],[86,30,0,20,0,"AUDIO"],[87,30,0,11,1,"AUDIO"],[88,3,0,31,0,"*"],[89,3,0,32,0,"STRING"],[90,32,1,30,0,"STRING"],[91,32,2,30,3,"STRING"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.6231786005377319,"offset":[1447.5848874332266,718.350338351755]},"frontendVersion":"1.18.9","VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}